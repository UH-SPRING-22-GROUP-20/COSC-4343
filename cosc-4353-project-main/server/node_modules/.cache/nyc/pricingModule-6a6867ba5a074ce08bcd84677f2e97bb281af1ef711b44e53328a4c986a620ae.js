function cov_m585mt92m(){var path="C:\\Users\\phanl\\Music\\cosc-4353-project-main\\server\\routes\\pricingModule.js";var hash="8a1921da2e259ec6e07f2486aefdfb3c159a0782";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\phanl\\Music\\cosc-4353-project-main\\server\\routes\\pricingModule.js",statementMap:{"0":{start:{line:1,column:15},end:{line:1,column:42}},"1":{start:{line:2,column:14},end:{line:2,column:30}},"2":{start:{line:4,column:0},end:{line:107,column:3}},"3":{start:{line:6,column:21},end:{line:6,column:40}},"4":{start:{line:7,column:24},end:{line:7,column:46}},"5":{start:{line:8,column:26},end:{line:8,column:34}},"6":{start:{line:14,column:4},end:{line:105,column:5}},"7":{start:{line:17,column:25},end:{line:99,column:10}},"8":{start:{line:19,column:12},end:{line:98,column:13}},"9":{start:{line:21,column:16},end:{line:21,column:42}},"10":{start:{line:22,column:16},end:{line:22,column:71}},"11":{start:{line:25,column:17},end:{line:98,column:13}},"12":{start:{line:27,column:16},end:{line:27,column:69}},"13":{start:{line:34,column:16},end:{line:34,column:41}},"14":{start:{line:35,column:16},end:{line:35,column:42}},"15":{start:{line:36,column:16},end:{line:36,column:44}},"16":{start:{line:37,column:16},end:{line:37,column:38}},"17":{start:{line:39,column:24},end:{line:97,column:6}},"18":{start:{line:41,column:8},end:{line:46,column:9}},"19":{start:{line:43,column:12},end:{line:43,column:39}},"20":{start:{line:44,column:12},end:{line:44,column:35}},"21":{start:{line:48,column:28},end:{line:48,column:31}},"22":{start:{line:49,column:27},end:{line:49,column:31}},"23":{start:{line:54,column:8},end:{line:60,column:9}},"24":{start:{line:56,column:12},end:{line:56,column:31}},"25":{start:{line:59,column:12},end:{line:59,column:31}},"26":{start:{line:62,column:8},end:{line:67,column:9}},"27":{start:{line:63,column:12},end:{line:63,column:33}},"28":{start:{line:66,column:12},end:{line:66,column:33}},"29":{start:{line:70,column:8},end:{line:77,column:9}},"30":{start:{line:72,column:12},end:{line:72,column:37}},"31":{start:{line:76,column:12},end:{line:76,column:34}},"32":{start:{line:79,column:21},end:{line:79,column:101}},"33":{start:{line:80,column:20},end:{line:80,column:41}},"34":{start:{line:81,column:20},end:{line:81,column:39}},"35":{start:{line:84,column:12},end:{line:95,column:15}},"36":{start:{line:104,column:8},end:{line:104,column:35}},"37":{start:{line:110,column:0},end:{line:137,column:3}},"38":{start:{line:120,column:16},end:{line:120,column:24}},"39":{start:{line:122,column:22},end:{line:136,column:14}},"40":{start:{line:126,column:16},end:{line:134,column:17}},"41":{start:{line:128,column:20},end:{line:128,column:47}},"42":{start:{line:132,column:20},end:{line:132,column:59}},"43":{start:{line:133,column:20},end:{line:133,column:41}},"44":{start:{line:139,column:0},end:{line:139,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:44},end:{line:4,column:45}},loc:{start:{line:5,column:0},end:{line:107,column:1}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:17,column:118},end:{line:17,column:119}},loc:{start:{line:18,column:8},end:{line:99,column:9}},line:18},"2":{name:"(anonymous_2)",decl:{start:{line:39,column:101},end:{line:39,column:102}},loc:{start:{line:39,column:116},end:{line:97,column:5}},line:39},"3":{name:"(anonymous_3)",decl:{start:{line:110,column:23},end:{line:110,column:24}},loc:{start:{line:111,column:0},end:{line:137,column:1}},line:111},"4":{name:"(anonymous_4)",decl:{start:{line:124,column:25},end:{line:124,column:26}},loc:{start:{line:125,column:12},end:{line:136,column:13}},line:125}},branchMap:{"0":{loc:{start:{line:19,column:12},end:{line:98,column:13}},type:"if",locations:[{start:{line:19,column:12},end:{line:98,column:13}},{start:{line:19,column:12},end:{line:98,column:13}}],line:19},"1":{loc:{start:{line:25,column:17},end:{line:98,column:13}},type:"if",locations:[{start:{line:25,column:17},end:{line:98,column:13}},{start:{line:25,column:17},end:{line:98,column:13}}],line:25},"2":{loc:{start:{line:41,column:8},end:{line:46,column:9}},type:"if",locations:[{start:{line:41,column:8},end:{line:46,column:9}},{start:{line:41,column:8},end:{line:46,column:9}}],line:41},"3":{loc:{start:{line:54,column:8},end:{line:60,column:9}},type:"if",locations:[{start:{line:54,column:8},end:{line:60,column:9}},{start:{line:54,column:8},end:{line:60,column:9}}],line:54},"4":{loc:{start:{line:62,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:62,column:8},end:{line:67,column:9}},{start:{line:62,column:8},end:{line:67,column:9}}],line:62},"5":{loc:{start:{line:70,column:8},end:{line:77,column:9}},type:"if",locations:[{start:{line:70,column:8},end:{line:77,column:9}},{start:{line:70,column:8},end:{line:77,column:9}}],line:70},"6":{loc:{start:{line:126,column:16},end:{line:134,column:17}},type:"if",locations:[{start:{line:126,column:16},end:{line:134,column:17}},{start:{line:126,column:16},end:{line:134,column:17}}],line:126}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8a1921da2e259ec6e07f2486aefdfb3c159a0782"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_m585mt92m=function(){return actualCoverage;};}return actualCoverage;}cov_m585mt92m();const router=(cov_m585mt92m().s[0]++,require("express").Router());const mysql=(cov_m585mt92m().s[1]++,require("../db"));cov_m585mt92m().s[2]++;router.get("/quote/:username/:gallons_req",async(req,res)=>{cov_m585mt92m().f[0]++;const username=(cov_m585mt92m().s[3]++,req.params.username);const gallons_req=(cov_m585mt92m().s[4]++,req.params.gallons_req);const delivery_date=(cov_m585mt92m().s[5]++,req.body);var state;var street;var city;var zipcode;cov_m585mt92m().s[6]++;try{const getState=(cov_m585mt92m().s[7]++,await mysql.query("SELECT * from COSC4353.client_information where username =?",[username],(err,results)=>{cov_m585mt92m().f[1]++;cov_m585mt92m().s[8]++;if(err){cov_m585mt92m().b[0][0]++;cov_m585mt92m().s[9]++;console.error(err.message);cov_m585mt92m().s[10]++;return res.status(400).json("Please complete profile");}else{cov_m585mt92m().b[0][1]++;cov_m585mt92m().s[11]++;if(results.length==0){cov_m585mt92m().b[1][0]++;cov_m585mt92m().s[12]++;return res.status(400).json("Complete your profile");}else{cov_m585mt92m().b[1][1]++;cov_m585mt92m().s[13]++;state=results[0].state;cov_m585mt92m().s[14]++;street=results[0].street;cov_m585mt92m().s[15]++;zipcode=results[0].zipcode;cov_m585mt92m().s[16]++;city=results[0].city;const pastOrders=(cov_m585mt92m().s[17]++,mysql.query("select * from COSC4353.fuelquote where username =?",[username],(err,results)=>{cov_m585mt92m().f[2]++;cov_m585mt92m().s[18]++;if(err){cov_m585mt92m().b[2][0]++;cov_m585mt92m().s[19]++;console.error(err.message);cov_m585mt92m().s[20]++;return res.status(401);}else{cov_m585mt92m().b[2][1]++;}var companyMargin=(cov_m585mt92m().s[21]++,0.1);var currentPrice=(cov_m585mt92m().s[22]++,1.50);var stateMargin;var rateHistoryMargin;var gallonsMargin;cov_m585mt92m().s[23]++;if(state=="TX"){cov_m585mt92m().b[3][0]++;cov_m585mt92m().s[24]++;stateMargin=0.02;}else{cov_m585mt92m().b[3][1]++;cov_m585mt92m().s[25]++;stateMargin=0.04;}cov_m585mt92m().s[26]++;if(gallons_req>1000){cov_m585mt92m().b[4][0]++;cov_m585mt92m().s[27]++;gallonsMargin=0.02;}else{cov_m585mt92m().b[4][1]++;cov_m585mt92m().s[28]++;gallonsMargin=0.03;}cov_m585mt92m().s[29]++;if(results.length>0){cov_m585mt92m().b[5][0]++;cov_m585mt92m().s[30]++;rateHistoryMargin=0.01;}else{cov_m585mt92m().b[5][1]++;cov_m585mt92m().s[31]++;rateHistoryMargin=0;}var margin=(cov_m585mt92m().s[32]++,currentPrice*(stateMargin-rateHistoryMargin+gallonsMargin+companyMargin));var price=(cov_m585mt92m().s[33]++,margin+currentPrice);var total=(cov_m585mt92m().s[34]++,gallons_req*price);cov_m585mt92m().s[35]++;return res.status(200).json({data:{username,gallons_req,state,street,city,zipcode,price,total}});}));}}}));}catch(err){cov_m585mt92m().s[36]++;console.error(err.message);}});cov_m585mt92m().s[37]++;router.post("/submit",(req,res)=>{cov_m585mt92m().f[3]++;const{username,gallons_req,state,zipcode,street,price,total,city,date}=(cov_m585mt92m().s[38]++,req.body);const query=(cov_m585mt92m().s[39]++,mysql.query("INSERT INTO COSC4353.fuelquote (username, gallons_req, state, zipcode, street, price, total, city, date) VALUES (?,?,?,?,?,?,?,?,?)",[username,gallons_req,state,zipcode,street,price,total,city,date],(err,results)=>{cov_m585mt92m().f[4]++;cov_m585mt92m().s[40]++;if(err){cov_m585mt92m().b[6][0]++;cov_m585mt92m().s[41]++;console.error(err.message);}else{cov_m585mt92m().b[6][1]++;cov_m585mt92m().s[42]++;res.status(200).json("Inserted Quote");cov_m585mt92m().s[43]++;console.log(results);}}));});cov_m585mt92m().s[44]++;module.exports=router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByaWNpbmdNb2R1bGUuanMiXSwibmFtZXMiOlsicm91dGVyIiwicmVxdWlyZSIsIlJvdXRlciIsIm15c3FsIiwiZ2V0IiwicmVxIiwicmVzIiwidXNlcm5hbWUiLCJwYXJhbXMiLCJnYWxsb25zX3JlcSIsImRlbGl2ZXJ5X2RhdGUiLCJib2R5Iiwic3RhdGUiLCJzdHJlZXQiLCJjaXR5IiwiemlwY29kZSIsImdldFN0YXRlIiwicXVlcnkiLCJlcnIiLCJyZXN1bHRzIiwiY29uc29sZSIsImVycm9yIiwibWVzc2FnZSIsInN0YXR1cyIsImpzb24iLCJsZW5ndGgiLCJwYXN0T3JkZXJzIiwiY29tcGFueU1hcmdpbiIsImN1cnJlbnRQcmljZSIsInN0YXRlTWFyZ2luIiwicmF0ZUhpc3RvcnlNYXJnaW4iLCJnYWxsb25zTWFyZ2luIiwibWFyZ2luIiwicHJpY2UiLCJ0b3RhbCIsImRhdGEiLCJwb3N0IiwiZGF0ZSIsImxvZyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJ3a0xBZVk7eUZBZlosS0FBTUEsQ0FBQUEsTUFBTSx5QkFBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBUCxDQUFtQkMsTUFBbkIsRUFBSCxDQUFaLENBQ0EsS0FBTUMsQ0FBQUEsS0FBSyx5QkFBR0YsT0FBTyxDQUFDLE9BQUQsQ0FBVixDQUFYLEMsdUJBRUFELE1BQU0sQ0FBQ0ksR0FBUCxDQUFXLCtCQUFYLENBQTRDLE1BQU1DLEdBQU4sQ0FBVUMsR0FBVixHQUM1Qyx3QkFDSSxLQUFNQyxDQUFBQSxRQUFRLHlCQUFHRixHQUFHLENBQUNHLE1BQUosQ0FBV0QsUUFBZCxDQUFkLENBQ0EsS0FBTUUsQ0FBQUEsV0FBVyx5QkFBR0osR0FBRyxDQUFDRyxNQUFKLENBQVdDLFdBQWQsQ0FBakIsQ0FDQSxLQUFNQyxDQUFBQSxhQUFhLHlCQUFHTCxHQUFHLENBQUNNLElBQVAsQ0FBbkIsQ0FDQSxHQUFJQyxDQUFBQSxLQUFKLENBQ0EsR0FBSUMsQ0FBQUEsTUFBSixDQUNBLEdBQUlDLENB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IikuUm91dGVyKClcbmNvbnN0IG15c3FsID0gcmVxdWlyZShcIi4uL2RiXCIpO1xuXG5yb3V0ZXIuZ2V0KFwiL3F1b3RlLzp1c2VybmFtZS86Z2FsbG9uc19yZXFcIiwgYXN5bmMocmVxLHJlcyk9Plxue1xuICAgIGNvbnN0IHVzZXJuYW1lID0gcmVxLnBhcmFtcy51c2VybmFtZTtcbiAgICBjb25zdCBnYWxsb25zX3JlcSA9IHJlcS5wYXJhbXMuZ2FsbG9uc19yZXE7XG4gICAgY29uc3QgZGVsaXZlcnlfZGF0ZSA9IHJlcS5ib2R5O1xuICAgIHZhciBzdGF0ZTtcbiAgICB2YXIgc3RyZWV0O1xuICAgIHZhciBjaXR5O1xuICAgIHZhciB6aXBjb2RlO1xuXG4gICAgdHJ5XG4gICAge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZ2V0U3RhdGUgPSBhd2FpdCBteXNxbC5xdWVyeShcIlNFTEVDVCAqIGZyb20gQ09TQzQzNTMuY2xpZW50X2luZm9ybWF0aW9uIHdoZXJlIHVzZXJuYW1lID0/XCIsIFt1c2VybmFtZV0sIChlcnIscmVzdWx0cykgPT5cbiAgICAgICAge1xuICAgICAgICAgICAgaWYoZXJyKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKFwiUGxlYXNlIGNvbXBsZXRlIHByb2ZpbGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdHMubGVuZ3RoID09IDApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKFwiQ29tcGxldGUgeW91ciBwcm9maWxlXCIpO1xuICAgICAgICAgICAgICAgIFxuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IHJlc3VsdHNbMF0uc3RhdGU7XG4gICAgICAgICAgICAgICAgc3RyZWV0ID0gcmVzdWx0c1swXS5zdHJlZXRcbiAgICAgICAgICAgICAgICB6aXBjb2RlID0gcmVzdWx0c1swXS56aXBjb2RlXG4gICAgICAgICAgICAgICAgY2l0eSA9IHJlc3VsdHNbMF0uY2l0eVxuXG4gICAgY29uc3QgcGFzdE9yZGVycyA9ICBteXNxbC5xdWVyeShcInNlbGVjdCAqIGZyb20gQ09TQzQzNTMuZnVlbHF1b3RlIHdoZXJlIHVzZXJuYW1lID0/XCIsW3VzZXJuYW1lXSwgKGVycixyZXN1bHRzKT0+e1xuICAgICAgICAgICAgICAgIFxuICAgICAgICBpZihlcnIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKTtcblxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB2YXIgY29tcGFueU1hcmdpbiA9IDAuMTtcbiAgICAgICAgdmFyIGN1cnJlbnRQcmljZSA9IDEuNTA7XG4gICAgICAgIHZhciBzdGF0ZU1hcmdpbjtcbiAgICAgICAgdmFyIHJhdGVIaXN0b3J5TWFyZ2luO1xuICAgICAgICB2YXIgZ2FsbG9uc01hcmdpbjtcbiAgICAgICAgXG4gICAgICAgIGlmKHN0YXRlID09IFwiVFhcIilcbiAgICAgICAge1xuICAgICAgICAgICAgc3RhdGVNYXJnaW4gPSAwLjAyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICBzdGF0ZU1hcmdpbiA9IDAuMDQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZ2FsbG9uc19yZXEgPiAxMDAwKXtcbiAgICAgICAgICAgIGdhbGxvbnNNYXJnaW4gPSAwLjAyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICBnYWxsb25zTWFyZ2luID0gMC4wMztcbiAgICAgICAgfVxuICAgICAgICBcblxuICAgICAgICBpZiAocmVzdWx0cy5sZW5ndGggPiAwKVxuICAgICAgICB7ICAgICBcbiAgICAgICAgICAgIHJhdGVIaXN0b3J5TWFyZ2luID0gMC4wMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJhdGVIaXN0b3J5TWFyZ2luID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBtYXJnaW4gPSBjdXJyZW50UHJpY2UgKiAoc3RhdGVNYXJnaW4gLSByYXRlSGlzdG9yeU1hcmdpbiArIGdhbGxvbnNNYXJnaW4gKyBjb21wYW55TWFyZ2luKVxuICAgICAgICB2YXIgcHJpY2UgPSBtYXJnaW4gKyBjdXJyZW50UHJpY2U7XG4gICAgICAgIHZhciB0b3RhbCA9IGdhbGxvbnNfcmVxICogcHJpY2U7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgICAgICAgZGF0YTpcbiAgICAgICAgICAgICAgICB7ICAgdXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGdhbGxvbnNfcmVxLFxuICAgICAgICAgICAgICAgICAgICBzdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgc3RyZWV0LFxuICAgICAgICAgICAgICAgICAgICBjaXR5LFxuICAgICAgICAgICAgICAgICAgICB6aXBjb2RlLFxuICAgICAgICAgICAgICAgICAgICBwcmljZSxcbiAgICAgICAgICAgICAgICAgICAgdG90YWxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICBcbiAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9XG4gICAgY2F0Y2goZXJyKVxuICAgIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XG4gICAgfVxuICAgIFxufSk7XG5cblxucm91dGVyLnBvc3QoXCIvc3VibWl0XCIsIChyZXEscmVzKT0+XG57XG4gICAgY29uc3Qge3VzZXJuYW1lLCBcbiAgICAgICAgZ2FsbG9uc19yZXEsIFxuICAgICAgICBzdGF0ZSwgXG4gICAgICAgIHppcGNvZGUsIFxuICAgICAgICBzdHJlZXQsIFxuICAgICAgICBwcmljZSwgXG4gICAgICAgIHRvdGFsLCBcbiAgICAgICAgY2l0eSwgXG4gICAgICAgIGRhdGV9ID0gcmVxLmJvZHk7XG5cbiAgICAgICAgY29uc3QgcXVlcnkgPSBteXNxbC5xdWVyeShcIklOU0VSVCBJTlRPIENPU0M0MzUzLmZ1ZWxxdW90ZSAodXNlcm5hbWUsIGdhbGxvbnNfcmVxLCBzdGF0ZSwgemlwY29kZSwgc3RyZWV0LCBwcmljZSwgdG90YWwsIGNpdHksIGRhdGUpIFZBTFVFUyAoPyw/LD8sPyw/LD8sPyw/LD8pXCIgLCBbdXNlcm5hbWUsIGdhbGxvbnNfcmVxLCBcbiAgICAgICAgICAgIHN0YXRlLCB6aXBjb2RlLCBzdHJlZXQsIHByaWNlLCB0b3RhbCwgXG4gICAgICAgICAgICBjaXR5LCBkYXRlXSwgKGVycixyZXN1bHRzKT0+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYoZXJyKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKFwiSW5zZXJ0ZWQgUXVvdGVcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdHMpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSlcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjsiXX0=